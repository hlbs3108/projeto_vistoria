<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Vistoria Automática</title>
<style>
    body {
        font-family: 'Segoe UI', Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #E60000;
        /* background-image opcional; se não tiver o arquivo, pode comentar/remover */
        background-image: url('{{ url_for("static", filename="claro_logo_bg.png") }}');
        background-repeat: repeat;
        background-size: 120px;
        background-attachment: fixed;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        overflow-y: auto;
    }

    .container {
        width: 90%;
        max-width: 900px;
        margin: 50px auto;
        background: rgba(255, 255, 255, 0.96);
        border-radius: 14px;
        box-shadow: 0 6px 30px rgba(0, 0, 0, 0.25);
        padding: 28px 34px;
        backdrop-filter: blur(4px);
        z-index: 2;
    }

    h2 {
        text-align: center;
        color: #E60000;
        margin-bottom: 20px;
        font-size: 24px;
    }

    form label {
        display: block;
        margin-top: 12px;
        font-weight: 600;
        color: #333;
    }

    form input, form select {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 15px;
        box-sizing: border-box;
    }

    .row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .row-3 {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
    }

    input[type="file"] {
        border: none;
        padding: 6px 0;
    }

    button[type="submit"] {
        margin-top: 20px;
        width: 100%;
        padding: 12px;
        background-color: #E60000;
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 17px;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 3px 10px rgba(230, 0, 0, 0.35);
    }
    button[type="submit"]:hover { background-color: #b00000; }

    .alert {
        margin-top: 10px;
        padding: 8px 10px;
        border-radius: 6px;
        font-weight: 600;
        text-align: center;
    }
    .alert.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .alert.danger  { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

    /* mensagem pequena logo abaixo do botão */
    .small-msg {
        font-size: 13px;
        margin-top: 8px;
    }

    .footer {
        text-align: center;
        margin-top: 18px;
        color: #666;
    }
    .footer a { color: #E60000; text-decoration: none; font-weight: 700; }
    .footer a:hover { text-decoration: underline; }

    @media (max-width: 820px) {
        .row, .row-3 { grid-template-columns: 1fr; }
    }
</style>
</head>
<body>
<div class="container">
    <h2>Formulário de Vistoria</h2>

    <form method="POST" enctype="multipart/form-data">
        <label>Endereço:</label>
        <input type="text" name="endereco" required>

        <div class="row">
            <div>
                <label>Cidade:</label>
                <input type="text" name="cidade" required>
            </div>
            <div>
                <label>Estado (UF):</label>
                <select name="estado" required>
                    <option value="">Selecione o estado</option>
                    <option value="AC">AC</option>
                    <option value="AL">AL</option>
                    <option value="AP">AP</option>
                    <option value="AM">AM</option>
                    <option value="BA">BA</option>
                    <option value="CE">CE</option>
                    <option value="DF">DF</option>
                    <option value="ES">ES</option>
                    <option value="GO">GO</option>
                    <option value="MA">MA</option>
                    <option value="MT">MT</option>
                    <option value="MS">MS</option>
                    <option value="MG">MG</option>
                    <option value="PA">PA</option>
                    <option value="PB">PB</option>
                    <option value="PR">PR</option>
                    <option value="PE">PE</option>
                    <option value="PI">PI</option>
                    <option value="RJ">RJ</option>
                    <option value="RN">RN</option>
                    <option value="RS">RS</option>
                    <option value="RO">RO</option>
                    <option value="RR">RR</option>
                    <option value="SC">SC</option>
                    <option value="SP">SP</option>
                    <option value="SE">SE</option>
                    <option value="TO">TO</option>
                </select>
            </div>
        </div>

        <label>Nome do Condomínio:</label>
        <input type="text" name="condominio" required>

        <div class="row">
            <div>
                <label>Quantidade de blocos:</label>
                <input type="number" name="blocos" min="0">
            </div>
            <div>
                <label>Quantidade de andares:</label>
                <input type="number" name="andares" min="0">
            </div>
        </div>

        <label>Apartamentos por andar:</label>
        <input type="number" name="apts_andar" min="0">

        <div class="row-3">
            <div>
                <label>Numeração inicial 1º andar:</label>
                <input type="text" name="num_1andar_ini">
            </div>
            <div>
                <label>Numeração final 1º andar:</label>
                <input type="text" name="num_1andar_fim">
            </div>
            <div>
                <label>Numeração inicial último andar:</label>
                <input type="text" name="num_ultandar_ini">
            </div>
        </div>

        <div class="row">
            <div>
                <label>Numeração final último andar:</label>
                <input type="text" name="num_ultandar_fim">
            </div>
            <div>
                <label>Total de apartamentos:</label>
                <input type="number" name="total_apts" min="0">
            </div>
        </div>

        <label>Distância Poste → DG (metros):</label>
        <input type="text" name="dist_poste_dg">

        <div class="row">
            <div>
                <label>Duas prumadas?</label>
                <select name="duas_prumadas">
                    <option value="Não">Não</option>
                    <option value="Sim">Sim</option>
                </select>
            </div>
            <div>
                <label>Distância DG → Prumada 1 (metros):</label>
                <input type="text" name="dist_prumada1">
            </div>
        </div>

        <label>Distância DG → Prumada 2 (metros):</label>
        <input type="text" name="dist_prumada2">

        <label>Sala comerciais no térreo?</label>
        <select name="sala_terreo">
            <option value="Não">Não</option>
            <option value="Sim">Sim</option>
        </select>

        <div class="row">
            <div>
                <label>Nome do síndico:</label>
                <input type="text" name="sindico">
            </div>
            <div>
                <label>Contato do síndico:</label>
                <input type="text" name="contato_sindico">
            </div>
        </div>

        <label>Área Técnica:</label>
        <input type="text" name="area_tecnica">

        <div class="row">
            <div>
                <label>Node HFC:</label>
                <input type="text" name="node_hfc">
            </div>
            <div>
                <label>Imóvel:</label>
                <input type="text" name="imovel">
            </div>
        </div>

        <label>Técnico responsável:</label>
        <input type="text" name="tecnico">

        <label>Destinatários:</label>
        <div>
            {% for email in emails %}
                <label style="display:block;">
                    <input type="checkbox" name="emails" value="{{ email }}" checked> {{ email }}
                </label>
            {% endfor %}
        </div>

        <label>Adicionar novo e-mail:</label>
        <input type="email" name="novo_email" placeholder="novo@email.com">

        <label>Anexo: Croqui</label>
        <input type="file" name="croqui">

        <label>Anexo: Planilha Padrão</label>
        <input type="file" name="planilha">

        <label>Anexo: Mapa de Rede</label>
        <input type="file" name="mapa">

        <button type="submit">Enviar Vistoria</button>

        <!-- Mensagem flash exibida logo abaixo do botão, fonte menor -->
        {% with mensagens = get_flashed_messages(with_categories=true) %}
          {% if mensagens %}
            {% for categoria, mensagem in mensagens %}
              <div class="alert {{ 'success' if categoria == 'success' else 'danger' }} small-msg">{{ mensagem }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}
    </form>

    <div class="footer">
        <a href="/historico">Ver Histórico de Vistorias ➜</a> &nbsp;|&nbsp;
        <a href="/emails">Gerenciar E-mails ➜</a>
    </div>
</div>
</body>
</html>